(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chatWithAi-smartAi"],{"029f":function(t,i,a){"use strict";var e=a("a803"),n=a.n(e);n.a},"0352":function(t,i,a){"use strict";(function(t){a("7a82");var e=a("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e(a("3835"));a("14d9"),a("e9c4"),a("caad"),a("2532"),a("ac1f"),a("5319"),a("5b81");var o=a("7a23"),r={data:function(){return{jwtToken:"",recordInput:"",loading:!1,chatRecordList:[]}},created:function(){this.token=this.generateJsonwebToken("da5fddb1da10215d1ea05ad39daad05f.uVfpOBxqq2iCqqcQ",3600)},computed:{computedWord:function(){return function(t){return t.length}}},methods:{sendMessage:function(){this.recordInput&&(this.chatRecordList.push({role:"user",content:this.recordInput}),this.createSSE(this.token,{prompt:this.chatRecordList}),this.chatRecordList.push({role:"assistant",content:""}),this.recordInput="",this.loading=!0,this.handleScrollBottom())},generateJsonwebToken:function(t,i){var e=t.split("."),o=(0,n.default)(e,2),r=o[0],s=o[1],c=(new Date).getTime()+i,d={api_key:r,exp:c,timestamp:(new Date).getTime()},l=a("b16c"),p=l.jws.JWS.sign("HS256",JSON.stringify({alg:"HS256",sign_type:"SIGN"}),JSON.stringify(d),s);return p},createSSE:function(i,a){var e=this;(0,o.fetchEventSource)("https://open.bigmodel.cn/api/paas/v3/model-api/chatglm_pro_test/sse-invoke",{method:"POST",headers:{"Content-Type":"application/json",Authorization:i},body:JSON.stringify(a),onmessage:function(i){e.handleScrollBottom();var a=document.getElementById("print");if("finish"===i.event){e.loading=!1;var n={role:"assistant",content:a.innerText};e.$set(e.chatRecordList,e.chatRecordList.length-1,n),e.$forceUpdate()}else if("add"===i.event){var o=i.data;a.innerText+=o,a.innerText.includes("ChatGLM")&&(a.innerText=a.innerText.replaceAll("ChatGLM","北斗参谋")),t("log","add",a.innerText," at pages/chatWithAi/smartAi.vue:183")}},onerror:function(i){t("log",i,"连接失败，请重试！"," at pages/chatWithAi/smartAi.vue:187")}})},handleScrollBottom:function(){var t=this;this.$nextTick((function(){var i=document.getElementsByClassName("chat_content")[0];t.animation(i,i.scrollHeight-i.offsetHeight)}))},animation:function(t,i,a){clearInterval(t.timer),t.timer=setInterval((function(){var e=(i-t.scrollTop)/10;e=e>0?Math.ceil(e):Math.floor(e),t.scrollTop>=i?(clearInterval(t.timer),a&&a()):t.scrollTop=t.scrollTop+e}),10)}}};i.default=r}).call(this,a("0de9")["log"])},"27db":function(t,i,a){"use strict";a.d(i,"b",(function(){return n})),a.d(i,"c",(function(){return o})),a.d(i,"a",(function(){return e}));var e={uniNavBar:a("8ab1").default,uniIcons:a("5391").default},n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"chatWrapper"},[a("uni-nav-bar",{staticClass:"chat_navBar"},[a("v-uni-view",{staticClass:"title"},[t._v("北斗参谋")]),a("template",{attrs:{slot:"right"},slot:"right"},[a("v-uni-view",{staticClass:"city"},[a("uni-icons",{staticClass:"qingchu",attrs:{"custom-prefix":"iconfont",type:"icon-icoqingchuhuancun",size:"25"}})],1)],1)],2),a("v-uni-view",{staticClass:"chat_content"},[t.chatRecordList.length?a("v-uni-view",{staticClass:"chatRecordList"},t._l(t.chatRecordList,(function(i,e){return a("v-uni-view",{key:e,staticClass:"chatRecordList_item"},["user"==i.role?a("v-uni-view",{staticClass:"user"},[a("v-uni-view",{staticClass:"user-avatar"},[a("uni-icons",{staticClass:"icons",staticStyle:{color:"#ffffff"},attrs:{"custom-prefix":"iconfont",type:"icon-yonghu",size:"20"}})],1),a("v-uni-view",{staticClass:"user-content"},[t._v(t._s(i.content))])],1):a("v-uni-view",{staticClass:"chatAi"},[a("v-uni-view",{staticClass:"chatAi-avatar"}),i.content?a("v-uni-view",{staticClass:"chatAi-content"}):a("v-uni-view",{staticClass:"chatAi-print",attrs:{id:"print"}}),i.content&&i.content.length?a("v-uni-view",{staticClass:"chatAi-operate"},[a("v-uni-view",{staticClass:"operate-left"},[t._v("共生成 "+t._s(t.computedWord(i.content))+"字"),a("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-zhongshi",size:"14"}}),t._v("重新生成")],1),a("v-uni-view",{staticClass:"operate-right"},[a("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-fuzhi",size:"14"}})],1)],1):t._e()],1)],1)})),1):a("v-uni-view",{staticClass:"tipsCard"},[a("v-uni-view",{staticClass:"tipsCard—avatar"}),a("v-uni-view",{staticClass:"tipsCard-tips"},[t._v("您好🙋！我是人工智能助手 北斗参谋，我能回答您所有问题，快来和我提问吧！")]),a("v-uni-view",{staticClass:"tipsCard-title"},[a("v-uni-view",{staticClass:"left"},[t._v("试一试以下列子")]),a("v-uni-view",{staticClass:"right"},[a("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-qiehuan",size:"20"}}),a("v-uni-view",{staticClass:"text"},[t._v("换一换")])],1)],1),a("v-uni-view",{staticClass:"example_content"},[a("v-uni-view",{staticClass:"example_item"},[t._v("我是一名学生，要演讲的主题是我...")]),a("v-uni-view",{staticClass:"example_item"},[t._v("模拟公务员发布一则通知，通知内容...")]),a("v-uni-view",{staticClass:"example_item"},[t._v("香蕉为什么叫香蕉 ？")]),a("v-uni-view",{staticClass:"example_item"},[t._v("国内比较著名的chatgtp有哪些 ？")])],1)],1)],1),a("v-uni-view",{staticClass:"chat_input"},[a("v-uni-textarea",{staticClass:"textarea",attrs:{maxlength:-1,"auto-height":!0,"show-confirm-bar":!1,"cursor-spacing":10,fixed:!0,"adjust-position":!0,placeholder:"有什么想法💡呢！",disabled:t.loading},model:{value:t.recordInput,callback:function(i){t.recordInput=i},expression:"recordInput"}}),t.loading?a("v-uni-view",{staticClass:"loadingIcon"}):a("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-fasong",size:"30"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.sendMessage.apply(void 0,arguments)}}})],1),t.loading?a("v-uni-view",{staticClass:"chatLoading"},[a("v-uni-view",{staticClass:"loadingIcon"}),t._v("生成中...")],1):t._e()],1)},o=[]},"84ff":function(t,i,a){"use strict";a.r(i);var e=a("27db"),n=a("e4398");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return n[t]}))}(o);a("029f");var r=a("f0c5"),s=Object(r["a"])(n["default"],e["b"],e["c"],!1,null,"212a3586",null,!1,e["a"],void 0);i["default"]=s.exports},a803:function(t,i,a){var e=a("bc5b");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("7f49ddac",e,!0,{sourceMap:!1,shadowMode:!1})},bc5b:function(t,i,a){var e=a("24fb"),n=a("1de5"),o=a("172c");i=e(!1);var r=n(o);i.push([t.i,".chatWrapper[data-v-212a3586]{position:relative}.chat_navBar[data-v-212a3586]{background-color:#f6f7f9!important;position:fixed;top:0;left:0;z-index:200;width:100%}.uni-navbar__content[data-v-212a3586],\n.uni-navbar__header[data-v-212a3586]{background-color:#f6f7f9!important}.title[data-v-212a3586]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;font-size:17px;font-weight:500;color:#333}.qingchu[data-v-212a3586]{cursor:pointer;opacity:.3}.icon-qiehuan[data-v-212a3586]{cursor:pointer;vertical-align:middle;margin-right:4px}.icon-fasong[data-v-212a3586]{cursor:pointer}.chat_content[data-v-212a3586]{position:relative;height:100vh;padding-bottom:85px;overflow:auto;background:#f6f7f9;margin-top:44px}.tipsCard[data-v-212a3586]{width:88.4%;padding:16px;margin:18px auto;height:406px;background:#fff;box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:16px}.tipsCard—avatar[data-v-212a3586]{width:32px;height:32px;border-radius:50%;margin-bottom:16px;background:#c40311}.tipsCard-tips[data-v-212a3586]{font-size:16px;font-weight:300;color:#333;line-height:26px;margin-bottom:43px}.tipsCard-title[data-v-212a3586]{margin-bottom:16px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.chatLoading[data-v-212a3586]{width:119px;height:38px;background:#fff;box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:10px;position:absolute;top:0;right:50%;-webkit-transform:translateX(50%);transform:translateX(50%);display:flex;flex-direction:row;justify-content:center;align-items:center}.loadingIcon[data-v-212a3586]{height:20px;width:25px;margin-right:10px;background:url("+r+') no-repeat;background-size:100%}.left[data-v-212a3586]{font-size:16px;font-weight:400;color:#333;line-height:26px;color:#333}.right[data-v-212a3586]{font-size:16px;font-weight:400;color:#333;line-height:26px;color:#333;vertical-align:bottom}.icon-refresh[data-v-212a3586]{vertical-align:bottom;margin-right:3px}.text[data-v-212a3586]{display:inline-block;opacity:.6;vertical-align:middle}.example_content[data-v-212a3586]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center}.example_item[data-v-212a3586]{width:48.6%;height:84px;background:rgba(196,3,17,.08);border-radius:6px;margin-bottom:16px;padding:16px 16px;font-size:16px;font-weight:300;color:#333;line-height:30px;overflow:hidden; /*溢出隐藏 */text-overflow:ellipsis; /*省略号 */display:-webkit-box; /* */word-break:break-all;-webkit-box-orient:vertical; /*设置弹性盒子的子元素的排列方式 */-webkit-line-clamp:2 /*设置显示文本的行数 */}.chat_input[data-v-212a3586]{position:fixed;bottom:0;left:0;width:100%;padding:13px 16px;\n\t/* height: 64px; */background:#f0f1f7;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.uni-easyinput[data-v-212a3586]{width:89%}.textarea[data-v-212a3586]{width:86%;padding:10px 8px;min-height:23px;max-height:200px;overflow-y:auto;border-radius:10px;background-color:#fff}.uni-textarea-placeholder[data-v-212a3586]{line-height:23px}.chatRecordList[data-v-212a3586]{width:88.4%;margin:0 auto;margin-top:24px}.user[data-v-212a3586]{width:100%;min-height:58px;padding:16px;background:hsla(0,0%,100%,.3);box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:8px;display:flex;flex-direction:row-reverse;align-items:center;margin-bottom:24px}.user-avatar[data-v-212a3586]{width:32px;line-height:32px;min-width:32px;height:32px;text-align:center;background:#c40311;border-radius:50%;margin-left:10px}.user-content[data-v-212a3586]{font-size:16px;font-family:PingFang-SC-Light,PingFang-SC;font-weight:300;color:#333;line-height:26px}.chatAi[data-v-212a3586]{width:100%;padding:16px;min-height:58px;background:#fff;box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:16px;margin-bottom:24px}.chatAi-avatar[data-v-212a3586]{width:32px;line-height:32px;min-width:32px;height:32px;text-align:center;background:#c40311;border-radius:50%}.chatAi-content[data-v-212a3586],\n.chatAi-print[data-v-212a3586]{padding:16px 0;font-size:16px;font-weight:300;color:#333;line-height:26px;border-bottom:1px solid rgba(51,51,51,.1)}.chatAi-operate[data-v-212a3586]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-top:16px}.operate-left[data-v-212a3586]{opacity:.3;font-size:12px;font-weight:400;color:#333;line-height:17px}.icon-zhongshi[data-v-212a3586]{margin-left:30px;margin-right:4px}.chatAi-print[data-v-212a3586]:after{-webkit-animation:blink 1s steps(5,start) infinite;animation:blink 1s steps(5,start) infinite;content:"▋";margin-left:.25rem;vertical-align:initial}',""]),t.exports=i},e4398:function(t,i,a){"use strict";a.r(i);var e=a("0352"),n=a.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(o);i["default"]=n.a}}]);