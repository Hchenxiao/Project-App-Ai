(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chatWithAi-languageMode"],{"3cc9":function(t,e,i){var a=i("24fb"),n=i("1de5"),o=i("172c");e=a(!1);var c=n(o);e.push([t.i,".chatWrapper[data-v-c9eabd72]{position:relative}.chat_navBar[data-v-c9eabd72]{background-color:#f6f7f9!important;position:fixed;top:0;left:0;z-index:200;width:100%}.uni-navbar__content[data-v-c9eabd72],\n.uni-navbar__header[data-v-c9eabd72]{background-color:#f6f7f9!important}.title[data-v-c9eabd72]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;font-size:17px;font-weight:500;color:#333}.qingchu[data-v-c9eabd72]{cursor:pointer;opacity:.3}.icon-qiehuan[data-v-c9eabd72]{cursor:pointer;vertical-align:middle;margin-right:4px}.icon-fasong[data-v-c9eabd72]{cursor:pointer}.chat_content[data-v-c9eabd72]{position:relative;height:100vh;padding-bottom:85px;overflow:auto;background:#f6f7f9;margin-top:44px}.chatLoading[data-v-c9eabd72]{width:119px;height:38px;background:#fff;box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:10px;position:absolute;top:44px;right:50%;-webkit-transform:translateX(50%);transform:translateX(50%);display:flex;flex-direction:row;justify-content:center;align-items:center;z-index:2000}.loadingIcon[data-v-c9eabd72]{height:20px;width:25px;margin-right:10px;background:url("+c+') no-repeat;background-size:100%}.tipsCard[data-v-c9eabd72]{width:88.4%;padding:16px;margin:18px auto;height:406px;background:#fff;box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:16px}.tipsCardâ€”avatar[data-v-c9eabd72]{width:32px;height:32px;border-radius:50%;margin-bottom:16px;background:#c40311}.tipsCard-tips[data-v-c9eabd72]{font-size:16px;font-weight:300;color:#333;line-height:26px;margin-bottom:43px}.tipsCard-title[data-v-c9eabd72]{margin-bottom:16px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.left[data-v-c9eabd72]{font-size:16px;font-weight:400;color:#333;line-height:26px;color:#333}.right[data-v-c9eabd72]{font-size:16px;font-weight:400;color:#333;line-height:26px;color:#333;vertical-align:bottom}.icon-refresh[data-v-c9eabd72]{vertical-align:bottom;margin-right:3px}.text[data-v-c9eabd72]{display:inline-block;opacity:.6;vertical-align:middle}.example_content[data-v-c9eabd72]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center}.example_item[data-v-c9eabd72]{width:100%;height:84px;background:rgba(196,3,17,.08);border-radius:6px;margin-bottom:16px;padding:16px;font-size:16px;font-weight:300;color:#333;line-height:30px;vertical-align:bottom;overflow:hidden; /*æº¢å‡ºéšè— */text-overflow:ellipsis; /*çœç•¥å· */display:-webkit-box; /* */word-break:break-all;-webkit-box-orient:vertical; /*è®¾ç½®å¼¹æ€§ç›’å­çš„å­å…ƒç´ çš„æ’åˆ—æ–¹å¼ */-webkit-line-clamp:2 /*è®¾ç½®æ˜¾ç¤ºæ–‡æœ¬çš„è¡Œæ•° */}.icons[data-v-c9eabd72]{vertical-align:bottom}.example_item_title[data-v-c9eabd72]{display:inline;color:#333;margin:0 0 0 6px;vertical-align:bottom}.example_item_content[data-v-c9eabd72]{display:inline}.chat_input[data-v-c9eabd72]{position:fixed;bottom:0;left:0;width:100%;padding:13px 16px;\n\t/* height: 64px; */background:#f0f1f7;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.uni-easyinput[data-v-c9eabd72]{width:89%}.textarea[data-v-c9eabd72]{width:86%;padding:10px 8px;min-height:23px;max-height:200px;overflow-y:auto;border-radius:10px;background-color:#fff}.uni-textarea-placeholder[data-v-c9eabd72]{line-height:23px}.chatRecordList[data-v-c9eabd72]{width:88.4%;margin:0 auto;margin-top:24px}.user[data-v-c9eabd72]{width:100%;min-height:58px;padding:16px;background:hsla(0,0%,100%,.3);box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:8px;display:flex;flex-direction:row-reverse;align-items:center;margin-bottom:24px}.user-avatar[data-v-c9eabd72]{width:32px;line-height:32px;min-width:32px;height:32px;text-align:center;background:#c40311;border-radius:50%;margin-left:10px}.user-content[data-v-c9eabd72]{font-size:16px;font-weight:300;color:#333;line-height:26px}.chatAi[data-v-c9eabd72]{width:100%;padding:16px;min-height:58px;background:#fff;box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:16px;margin-bottom:24px}.chatAi-avatar[data-v-c9eabd72]{width:32px;line-height:32px;min-width:32px;height:32px;text-align:center;background:#c40311;border-radius:50%}.chatAi-content[data-v-c9eabd72],\n.chatAi-print[data-v-c9eabd72]{padding:16px 0;font-size:16px;font-weight:300;color:#333;line-height:26px;border-bottom:1px solid rgba(51,51,51,.1)}.chatAi-operate[data-v-c9eabd72]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-top:16px}.operate-left[data-v-c9eabd72]{opacity:.3;font-size:12px;font-weight:400;color:#333;line-height:17px}.icon-zhongshi[data-v-c9eabd72]{margin-left:30px;margin-right:4px}.chatAi-print[data-v-c9eabd72]:after{-webkit-animation:blink 1s steps(5,start) infinite;animation:blink 1s steps(5,start) infinite;content:"â–‹";margin-left:.25rem;vertical-align:initial}',""]),t.exports=e},"499b":function(t,e,i){"use strict";i.r(e);var a=i("bf7b"),n=i("ea4a");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("b6dd");var c=i("f0c5"),s=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"c9eabd72",null,!1,a["a"],void 0);e["default"]=s.exports},"4a9d":function(t,e,i){var a=i("3cc9");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("dd16c5da",a,!0,{sourceMap:!1,shadowMode:!1})},"4f48":function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("3835"));i("14d9"),i("e9c4"),i("caad"),i("2532"),i("ac1f"),i("5319"),i("5b81");var o=i("7a23"),c={data:function(){return{jwtToken:"",recordInput:"",loading:!1,chatRecordList:[]}},created:function(){this.token=this.generateJsonwebToken("da5fddb1da10215d1ea05ad39daad05f.uVfpOBxqq2iCqqcQ",3600)},computed:{computedWord:function(){return function(t){return t.length}}},methods:{sendMessage:function(){this.recordInput&&(this.chatRecordList.push({role:"user",content:this.recordInput}),this.createSSE(this.token,{prompt:this.chatRecordList}),this.chatRecordList.push({role:"assistant",content:""}),this.recordInput="",this.loading=!0,this.handleScrollBottom())},generateJsonwebToken:function(t,e){var a=t.split("."),o=(0,n.default)(a,2),c=o[0],s=o[1],r=(new Date).getTime()+e,d={api_key:c,exp:r,timestamp:(new Date).getTime()},l=i("b16c"),p=l.jws.JWS.sign("HS256",JSON.stringify({alg:"HS256",sign_type:"SIGN"}),JSON.stringify(d),s);return p},createSSE:function(t,e){var i=this;(0,o.fetchEventSource)("https://open.bigmodel.cn/api/paas/v3/model-api/chatglm_pro_test/sse-invoke",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e),onmessage:function(t){i.handleScrollBottom();var e=document.getElementById("print");if("finish"===t.event){i.loading=!1;var a={role:"assistant",content:e.innerText};i.$set(i.chatRecordList,i.chatRecordList.length-1,a)}else if("add"===t.event){var n=t.data;e.innerText+=n,e.innerText.includes("ChatGLM")&&(e.innerText=e.innerText.replaceAll("ChatGLM","åŒ—æ–—å‚è°‹"))}},onerror:function(t){console.log(t,"è¿æ¥å¤±è´¥ï¼Œè¯·é‡è¯•ï¼")}})},handleScrollBottom:function(){var t=this;this.$nextTick((function(){var e=document.getElementsByClassName("chat_content")[0];t.animation(e,e.scrollHeight-e.offsetHeight)}))},animation:function(t,e,i){clearInterval(t.timer),t.timer=setInterval((function(){var a=(e-t.scrollTop)/10;a=a>0?Math.ceil(a):Math.floor(a),t.scrollTop>=e?(clearInterval(t.timer),i&&i()):t.scrollTop=t.scrollTop+a}),10)}}};e.default=c},b6dd:function(t,e,i){"use strict";var a=i("4a9d"),n=i.n(a);n.a},bf7b:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uniNavBar:i("8ab1").default,uniIcons:i("5391").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"chatWrapper"},[i("uni-nav-bar",{staticClass:"chat_navBar"},[i("v-uni-view",{staticClass:"title"},[t._v("åŒ—æ–—å‚è°‹")]),i("template",{attrs:{slot:"right"},slot:"right"},[i("v-uni-view",{staticClass:"city"},[i("uni-icons",{staticClass:"qingchu",attrs:{"custom-prefix":"iconfont",type:"icon-qingchu",size:"25"}})],1)],1),t.loading?i("v-uni-view",{staticClass:"chatLoading"},[i("v-uni-view",{staticClass:"loadingIcon"}),t._v("ç”Ÿæˆä¸­...")],1):t._e()],2),i("v-uni-view",{ref:"chat_content",staticClass:"chat_content"},[t.chatRecordList.length?i("v-uni-view",{staticClass:"chatRecordList"},t._l(t.chatRecordList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"chatRecordList_item"},["user"==e.role?i("v-uni-view",{staticClass:"user"},[i("v-uni-view",{staticClass:"user-avatar"},[i("uni-icons",{staticClass:"icons",staticStyle:{color:"#ffffff"},attrs:{"custom-prefix":"iconfont",type:"icon-yonghu",size:"20"}})],1),i("v-uni-view",{staticClass:"user-content"},[t._v(t._s(e.content))])],1):i("v-uni-view",{staticClass:"chatAi"},[i("v-uni-view",{staticClass:"chatAi-avatar"}),e.content?i("v-uni-view",{staticClass:"chatAi-content"}):i("v-uni-view",{staticClass:"chatAi-print",attrs:{id:"print"}}),e.content&&e.content.length?i("v-uni-view",{staticClass:"chatAi-operate"},[i("v-uni-view",{staticClass:"operate-left"},[t._v("å…±ç”Ÿæˆ "+t._s(t.computedWord(e.content))+"å­—"),i("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-zhongshi",size:"14"}}),t._v("é‡æ–°ç”Ÿæˆ")],1),i("v-uni-view",{staticClass:"operate-right"},[i("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-fuzhi",size:"14"}})],1)],1):t._e()],1)],1)})),1):i("v-uni-view",{staticClass:"tipsCard"},[i("v-uni-view",{staticClass:"tipsCardâ€”avatar"}),i("v-uni-view",{staticClass:"tipsCard-tips"},[t._v("æ‚¨å¥½ğŸ™‹ï¼æˆ‘æ˜¯äººå·¥æ™ºèƒ½åŠ©æ‰‹ åŒ—æ–—å‚è°‹ï¼Œæˆ‘èƒ½å›ç­”æ‚¨æ‰€æœ‰é—®é¢˜ï¼Œå¿«æ¥å’Œæˆ‘æé—®å§ï¼")]),i("v-uni-view",{staticClass:"tipsCard-title"},[i("v-uni-view",{staticClass:"left"},[t._v("è¯•ä¸€è¯•ä»¥ä¸‹åˆ—å­")]),i("v-uni-view",{staticClass:"right"},[i("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-qiehuan",size:"20"}}),i("v-uni-view",{staticClass:"text"},[t._v("æ¢ä¸€æ¢")])],1)],1),i("v-uni-view",{staticClass:"example_content"},[i("v-uni-view",{staticClass:"example_item"},[i("uni-icons",{staticClass:"icons",staticStyle:{color:"#C40311"},attrs:{"custom-prefix":"iconfont",type:"icon-yiwen",size:"25"}}),i("v-uni-view",{staticClass:"example_item_title"},[t._v("å³å…´å‘è¨€ï¼š")]),i("v-uni-view",{staticClass:"example_item_content"},[t._v("æˆ‘æ˜¯ä¸€åå­¦ç”Ÿï¼Œè¦æ¼”è®²çš„ä¸»é¢˜æ˜¯æˆ‘çš„è€å¸ˆï¼Œè¦æ±‚å­—æ•°500å­—ä»¥ä¸Šï¼Œå†…â€¦")])],1),i("v-uni-view",{staticClass:"example_item"},[i("uni-icons",{staticClass:"icons",staticStyle:{color:"#C40311"},attrs:{"custom-prefix":"iconfont",type:"icon-document",size:"25"}}),i("v-uni-view",{staticClass:"example_item_title"},[t._v("å…¬æ–‡åŠ©æ‰‹ï¼š")]),i("v-uni-view",{staticClass:"example_item_content"},[t._v("æˆ‘æ˜¯ä¸€åå­¦ç”Ÿï¼Œè¦æ¼”è®²çš„ä¸»é¢˜æ˜¯æˆ‘çš„è€å¸ˆï¼Œè¦æ±‚å­—æ•°500å­—ä»¥ä¸Šï¼Œå†…â€¦")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"chat_input"},[i("v-uni-textarea",{staticClass:"textarea",attrs:{maxlength:-1,"auto-height":!0,"auto-focus":!0,"show-confirm-bar":!1,"cursor-spacing":10,fixed:!0,"adjust-position":!1,placeholder:"æœ‰ä»€ä¹ˆæƒ³æ³•ğŸ’¡å‘¢ï¼",disabled:t.loading},model:{value:t.recordInput,callback:function(e){t.recordInput=e},expression:"recordInput"}}),t.loading?i("v-uni-view",{staticClass:"loadingIcon"}):i("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-fasong",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage.apply(void 0,arguments)}}})],1)],1)},o=[]},ea4a:function(t,e,i){"use strict";i.r(e);var a=i("4f48"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a}}]);