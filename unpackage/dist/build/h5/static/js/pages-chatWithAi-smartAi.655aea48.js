(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chatWithAi-smartAi"],{"0352":function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("3835"));n("14d9"),n("e9c4"),n("caad"),n("2532"),n("ac1f"),n("5319"),n("5b81");var a=n("7a23"),o={data:function(){return{jwtToken:"",recordInput:"",loading:!1,chatRecordList:[]}},created:function(){this.token=this.generateJsonwebToken("da5fddb1da10215d1ea05ad39daad05f.uVfpOBxqq2iCqqcQ",3600)},computed:{computedWord:function(){return function(t){return t.length}}},methods:{sendMessage:function(){this.recordInput&&(this.chatRecordList.push({role:"user",content:this.recordInput}),this.createSSE(this.token,{prompt:this.chatRecordList}),this.chatRecordList.push({role:"assistant",content:""}),this.recordInput="",this.loading=!0,this.handleScrollBottom())},copyContent:function(t){uni.setClipboardData({data:t,success:function(){console.log("成功设置剪贴板数据")},fail:function(t){console.log("设置剪贴板数据失败，错误信息："+t)}})},clearChatRecord:function(){this.chatRecordList=[]},generateJsonwebToken:function(t,e){var i=t.split("."),a=(0,r.default)(i,2),o=a[0],c=a[1],s=(new Date).getTime()+e,l={api_key:o,exp:s,timestamp:(new Date).getTime()},u=n("b16c"),f=u.jws.JWS.sign("HS256",JSON.stringify({alg:"HS256",sign_type:"SIGN"}),JSON.stringify(l),c);return f},createSSE:function(t,e){var n=this;(0,a.fetchEventSource)("https://open.bigmodel.cn/api/paas/v3/model-api/chatglm_pro_test/sse-invoke",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e),onmessage:function(t){n.handleScrollBottom();var e=document.getElementById("print");if("finish"===t.event){n.loading=!1;var i={role:"assistant",content:e.innerText};n.$set(n.chatRecordList,n.chatRecordList.length-1,i),n.$forceUpdate()}else if("add"===t.event){var r=t.data;e.innerText+=r,e.innerText.includes("ChatGLM")&&(e.innerText=e.innerText.replaceAll("ChatGLM","北斗参谋")),console.log("add",e.innerText)}},onerror:function(t){console.log(t,"连接失败，请重试！")}})},handleScrollBottom:function(){var t=this;this.$nextTick((function(){var e=document.getElementsByClassName("chat_content")[0];t.animation(e,e.scrollHeight-e.offsetHeight)}))},animation:function(t,e,n){clearInterval(t.timer),t.timer=setInterval((function(){var i=(e-t.scrollTop)/10;i=i>0?Math.ceil(i):Math.floor(i),t.scrollTop>=e?(clearInterval(t.timer),n&&n()):t.scrollTop=t.scrollTop+i}),10)}}};e.default=o},"1da1":function(t,e,n){"use strict";function i(t,e,n,i,r,a,o){try{var c=t[a](o),s=c.value}catch(l){return void n(l)}c.done?e(s):Promise.resolve(s).then(i,r)}n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function c(t){i(o,r,a,c,s,"next",t)}function s(t){i(o,r,a,c,s,"throw",t)}c(void 0)}))}},n("d3b7")},"406f":function(t,e,n){var i=n("9bc5");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("7cb6222e",i,!0,{sourceMap:!1,shadowMode:!1})},7962:function(t,e,n){"use strict";var i=n("406f"),r=n.n(i);r.a},"84ff":function(t,e,n){"use strict";n.r(e);var i=n("b060"),r=n("e4398");for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("7962");var o=n("f0c5"),c=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,"5f8b863e",null,!1,i["a"],void 0);e["default"]=c.exports},"9bc5":function(t,e,n){var i=n("24fb"),r=n("1de5"),a=n("172c");e=i(!1);var o=r(a);e.push([t.i,".chatWrapper[data-v-5f8b863e]{position:relative}.chat_navBar[data-v-5f8b863e]{background-color:#f6f7f9!important;position:fixed;top:0;left:0;z-index:200;width:100%}.uni-navbar__content[data-v-5f8b863e],\n.uni-navbar__header[data-v-5f8b863e]{background-color:#f6f7f9!important}.title[data-v-5f8b863e]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;font-size:17px;font-weight:500;color:#333}.qingchu[data-v-5f8b863e]{cursor:pointer;opacity:.3}.icon-qiehuan[data-v-5f8b863e]{cursor:pointer;vertical-align:middle;margin-right:4px}.icon-fasong[data-v-5f8b863e]{cursor:pointer}.chat_content[data-v-5f8b863e]{position:relative;height:100vh;padding-bottom:85px;overflow:auto;background:#f6f7f9;margin-top:44px}.tipsCard[data-v-5f8b863e]{width:88.4%;padding:16px;margin:18px auto;height:406px;background:#fff;box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:16px}.tipsCard—avatar[data-v-5f8b863e]{width:32px;height:32px;border-radius:50%;margin-bottom:16px;background:#c40311}.tipsCard-tips[data-v-5f8b863e]{font-size:16px;font-weight:300;color:#333;line-height:26px;margin-bottom:43px}.tipsCard-title[data-v-5f8b863e]{margin-bottom:16px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.chatLoading[data-v-5f8b863e]{width:119px;height:38px;background:#fff;box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:10px;position:absolute;top:44px;right:50%;-webkit-transform:translateX(50%);transform:translateX(50%);display:flex;flex-direction:row;justify-content:center;align-items:center;z-index:2000}.loadingIcon[data-v-5f8b863e]{height:20px;width:25px;margin-right:10px;background:url("+o+') no-repeat;background-size:100%}.left[data-v-5f8b863e]{font-size:16px;font-weight:400;color:#333;line-height:26px;color:#333}.right[data-v-5f8b863e]{font-size:16px;font-weight:400;color:#333;line-height:26px;color:#333;vertical-align:bottom}.icon-refresh[data-v-5f8b863e]{vertical-align:bottom;margin-right:3px}.text[data-v-5f8b863e]{display:inline-block;opacity:.6;vertical-align:middle}.example_content[data-v-5f8b863e]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center}.example_item[data-v-5f8b863e]{width:48.6%;height:84px;background:rgba(196,3,17,.08);border-radius:6px;margin-bottom:16px;padding:16px 16px;font-size:16px;font-weight:300;color:#333;line-height:30px;overflow:hidden; /*溢出隐藏 */text-overflow:ellipsis; /*省略号 */display:-webkit-box; /* */word-break:break-all;-webkit-box-orient:vertical; /*设置弹性盒子的子元素的排列方式 */-webkit-line-clamp:2 /*设置显示文本的行数 */}.chat_input[data-v-5f8b863e]{position:fixed;bottom:0;left:0;width:100%;padding:13px 16px;\n\t/* height: 64px; */background:#f0f1f7;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.uni-easyinput[data-v-5f8b863e]{width:89%}.textarea[data-v-5f8b863e]{position:fixed;bottom:10px;left:10px;width:88%;padding:10px 14px;min-height:23px;max-height:200px;overflow-y:auto;border-radius:10px;background-color:#fff}.uni-textarea-placeholder[data-v-5f8b863e]{line-height:23px}.chatRecordList[data-v-5f8b863e]{width:88.4%;margin:0 auto;margin-top:24px}.user[data-v-5f8b863e]{width:100%;min-height:58px;padding:16px;background:hsla(0,0%,100%,.3);box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:8px;display:flex;flex-direction:row-reverse;align-items:flex-start;margin-bottom:24px}.user-avatar[data-v-5f8b863e]{width:32px;line-height:32px;min-width:32px;height:32px;text-align:center;background:#c40311;border-radius:50%;margin-left:10px}.user-content[data-v-5f8b863e]{font-size:16px;font-family:PingFang-SC-Light,PingFang-SC;font-weight:300;color:#333;line-height:26px;margin-top:3px}.chatAi[data-v-5f8b863e]{width:100%;padding:16px;min-height:58px;background:#fff;box-shadow:0 2px 10px 0 rgba(196,3,17,.08);border-radius:16px;margin-bottom:24px}.chatAi-avatar[data-v-5f8b863e]{width:32px;line-height:32px;min-width:32px;height:32px;text-align:center;background:#c40311;border-radius:50%}.chatAi-content[data-v-5f8b863e],\n.chatAi-print[data-v-5f8b863e]{padding:16px 0;font-size:16px;font-weight:300;color:#333;line-height:26px;border-bottom:1px solid rgba(51,51,51,.1)}.chatAi-operate[data-v-5f8b863e]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-top:16px}.operate-left[data-v-5f8b863e]{opacity:.3;font-size:12px;font-weight:400;color:#333;line-height:17px}.icon-zhongshi[data-v-5f8b863e]{margin-left:30px;margin-right:4px}.chatAi-print[data-v-5f8b863e]:after{-webkit-animation:blink 1s steps(5,start) infinite;animation:blink 1s steps(5,start) infinite;content:"▋";margin-left:.25rem;vertical-align:initial}.loading_input[data-v-5f8b863e]{margin-right:0}',""]),t.exports=e},b060:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uniNavBar:n("8ab1").default,uniIcons:n("5391").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"chatWrapper"},[n("uni-nav-bar",{staticClass:"chat_navBar"},[n("v-uni-view",{staticClass:"title"},[t._v("北斗参谋")]),n("template",{attrs:{slot:"right"},slot:"right"},[n("v-uni-view",{staticClass:"city"},[n("uni-icons",{staticClass:"qingchu",attrs:{"custom-prefix":"iconfont",type:"icon-qingchu",size:"25"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearChatRecord.apply(void 0,arguments)}}})],1)],1),t.loading?n("v-uni-view",{staticClass:"chatLoading"},[n("v-uni-view",{staticClass:"loadingIcon"}),t._v("生成中...")],1):t._e()],2),n("v-uni-view",{staticClass:"chat_content"},[t.chatRecordList.length?n("v-uni-view",{staticClass:"chatRecordList"},t._l(t.chatRecordList,(function(e,i){return n("v-uni-view",{key:i,staticClass:"chatRecordList_item"},["user"==e.role?n("v-uni-view",{staticClass:"user"},[n("v-uni-view",{staticClass:"user-avatar"},[n("uni-icons",{staticClass:"icons",staticStyle:{color:"#ffffff"},attrs:{"custom-prefix":"iconfont",type:"icon-yonghu",size:"20"}})],1),n("v-uni-view",{staticClass:"user-content"},[t._v(t._s(e.content))])],1):n("v-uni-view",{staticClass:"chatAi"},[n("v-uni-view",{staticClass:"chatAi-avatar"}),e.content?n("v-uni-view",{staticClass:"chatAi-content"}):n("v-uni-view",{staticClass:"chatAi-print",attrs:{id:"print"}}),e.content&&e.content.length?n("v-uni-view",{staticClass:"chatAi-operate"},[n("v-uni-view",{staticClass:"operate-left"},[t._v("共生成 "+t._s(t.computedWord(e.content))+"字"),n("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-zhongshi",size:"14"}}),t._v("重新生成")],1),n("v-uni-view",{staticClass:"operate-right"},[n("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-fuzhi",size:"14"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.copyContent(e.content)}}})],1)],1):t._e()],1)],1)})),1):n("v-uni-view",{staticClass:"tipsCard"},[n("v-uni-view",{staticClass:"tipsCard—avatar"}),n("v-uni-view",{staticClass:"tipsCard-tips"},[t._v("您好🙋！我是人工智能助手 北斗参谋，我能回答您所有问题，快来和我提问吧！")]),n("v-uni-view",{staticClass:"tipsCard-title"},[n("v-uni-view",{staticClass:"left"},[t._v("试一试以下列子")]),n("v-uni-view",{staticClass:"right"},[n("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-qiehuan",size:"20"}}),n("v-uni-view",{staticClass:"text"},[t._v("换一换")])],1)],1),n("v-uni-view",{staticClass:"example_content"},[n("v-uni-view",{staticClass:"example_item"},[t._v("我是一名学生，要演讲的主题是我...")]),n("v-uni-view",{staticClass:"example_item"},[t._v("模拟公务员发布一则通知，通知内容...")]),n("v-uni-view",{staticClass:"example_item"},[t._v("香蕉为什么叫香蕉 ？")]),n("v-uni-view",{staticClass:"example_item"},[t._v("国内比较著名的chatgtp有哪些 ？")])],1)],1)],1),n("v-uni-view",{staticClass:"chat_input"},[n("v-uni-textarea",{staticClass:"textarea",attrs:{maxlength:-1,"auto-height":!0,"show-confirm-bar":!1,"cursor-spacing":20,fixed:!0,"adjust-position":!1,placeholder:"有什么想法💡呢！",disabled:t.loading},model:{value:t.recordInput,callback:function(e){t.recordInput=e},expression:"recordInput"}}),t.loading?n("v-uni-view",{staticClass:"loadingIcon"}):n("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-fasong",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage.apply(void 0,arguments)}}})],1)],1)},a=[]},c7eb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
e.default=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(T){u=function(t,e,n){return t[e]=n}}function f(t,e,n,i){var r=e&&e.prototype instanceof h?e:h,o=Object.create(r.prototype),c=new j(i||[]);return a(o,"_invoke",{value:C(t,n,c)}),o}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(T){return{type:"throw",arg:T}}}t.wrap=f;var p={};function h(){}function v(){}function g(){}var x={};u(x,c,(function(){return this}));var b=Object.getPrototypeOf,m=b&&b(b(S([])));m&&m!==n&&r.call(m,c)&&(x=m);var w=g.prototype=h.prototype=Object.create(x);function y(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var n;a(this,"_invoke",{value:function(a,o){function c(){return new e((function(n,c){(function n(a,o,c,s){var l=d(t[a],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==(0,i.default)(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,s)}))}s(l.arg)})(a,o,n,c)}))}return n=n?n.then(c,c):c()}})}function C(t,e,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return O()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var c=k(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=d(t,e,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}function k(t,e){var n=e.method,i=t.iterator[n];if(void 0===i)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var r=d(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return v.prototype=g,a(w,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:v,configurable:!0}),v.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},y(_.prototype),u(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new _(f(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},y(w),u(w,l,"Generator"),u(w,c,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=S,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return o.type="throw",o.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t},n("7a82"),n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b636"),n("944a"),n("0c47"),n("23dc"),n("3410"),n("d9e2"),n("d401"),n("14d9"),n("159b"),n("131a"),n("26e9"),n("fb6a");var i=function(t){return t&&t.__esModule?t:{default:t}}(n("53ca"))},e4398:function(t,e,n){"use strict";n.r(e);var i=n("0352"),r=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a}}]);